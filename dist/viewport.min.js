"use strict";function e(e,t,n){null!=e&&(e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,function(){return n.call(e,window.event)}))}function t(e,t,n){null!=e&&(e.removeEventListener?e.removeEventListener(t,n):e.detachEvent("on"+t,n))}function n(e,t,n){return null!=t?function(){return t.map(function(t){return n[t](e,e.document)})}:function(){return null}}var r=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)};function i(e,t,n){this.items=null!=e?[].concat(r(e)):[],this.loaded=t||null,this.unloaded=n||null}function o(e){return function(t,r){var o=[],s=n(e.view,t.args,r),u={};return u.type=t.type,u.subscribers=new i(null,function(){return n=(t=u).type,r=t.publisher,i=e.view,o=e.addEventListener,void n.forEach(function(e){o(i,e,r)});var t,n,r,i,o},function(){return n=(t=u).type,r=t.publisher,i=e.view,o=e.removeEventListener,void n.forEach(function(e){o(i,e,r)});var t,n,r,i,o}),u.publisher=function(e){u.subscribers.length;var t=s();if(!0!==e&&null!==t){var n=t.some(function(e,t){return o[t]!==e});if(o=t,!n)return!1}u.subscribers.forEach(function(e){e.apply(null,t)})},u}}i.prototype={get length(){return this.items.length},add:function(e){-1===this.items.indexOf(e)&&(this.items.push(e),this.loaded&&1===this.items.length&&this.loaded(this))},remove:function(e){var t=this.items.indexOf(e);t>-1&&(this.items.splice(t,1),this.unloaded&&!this.items.length&&this.unloaded(this))},empty:function(){this.items=[],this.unloaded&&this.unloaded(this)},forEach:function(e){for(var t=-1,n=this.items.length;++t<n;)if(!1===e(this.items[t],t,this.items))return}};var s={load:{type:["load"]},unload:{type:["beforeunload"]},resize:{type:["resize","scroll","orientationchange"],args:["width","height"]},scroll:{type:["scroll"],args:["scrollX","scrollY"]}},u={width:function(e,t){return e.innerWidth||t.documentElement.clientWidth||t.body.clientWidth},height:function(e,t){return e.innerHeight||t.documentElement.clientHeight||t.body.clientHeight},scrollX:function(e,t){return e.scrollX||e.pageXOffset},scrollY:function(e,t){return e.scrollY||e.pageYOffset}};function l(){var n={},r=o({addEventListener:e,removeEventListener:t,view:arguments.length>0&&void 0!==arguments[0]?arguments[0]:window});Object.keys(s).forEach(function(e){n[e]=r(s[e],u)});var i=function(e){if(!n[e])throw new Error("The '"+e+"' is not a valid event name.");return n[e]},l={on:function(e,t){var n=i(e);return"function"==typeof t&&n.subscribers.add(t),l},off:function(e,t){if(void 0===e)Object.keys(n).forEach(function(e){n[e].subscribers.removeAll()});else{var r=i(e);"function"==typeof t?r.subscribers.remove(t):void 0===t&&r.subscribers.removeAll()}return l},trigger:function(e){return i(e).publisher(!0),l}};return Object.keys(u).forEach(function(e){l[e]=u[e]}),l}module.exports=l;
