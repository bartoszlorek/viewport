"use strict";function t(t,e,n){null!=t&&(t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent("on"+e,function(){return n.call(t,window.event)}))}function e(t,e,n){null!=t&&(t.removeEventListener?t.removeEventListener(e,n):t.detachEvent("on"+e,n))}function n(t,e,n){return null!=e?function(){return e.map(function(e){return n[e](t,t.document)})}:function(){return null}}var r=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)};function i(t,e,n){this.items=null!=t?[].concat(r(t)):[],this.loaded=e||null,this.unloaded=n||null}function o(t){return function(e,r){var o=[],s=n(t.view,e.args,r),u={type:e.type,subscribers:new i(null,function(){return n=(e=u).type,r=e.publisher,void n.forEach(function(e){t.addEventListener(t.view,e,r)});var e,n,r},function(){return n=(e=u).type,r=e.publisher,void n.forEach(function(e){t.removeEventListener(t.view,e,r)});var e,n,r}),publisher:function(t){var e=s();if(!0!==t&&null!==e){var n=e.some(function(t,e){return o[e]!==t});if(o=e,!n)return!1}u.subscribers.forEach(function(t){t.apply(null,e)})}};return u}}i.prototype={get length(){return this.items.length},add:function(t){-1===this.items.indexOf(t)&&(this.items.push(t),this.loaded&&1===this.items.length&&this.loaded(this))},remove:function(t){var e=this.items.indexOf(t);e>-1&&(this.items.splice(e,1),this.unloaded&&!this.items.length&&this.unloaded(this))},empty:function(){this.items=[],this.unloaded&&this.unloaded(this)},forEach:function(t){for(var e=-1,n=this.items.length;++e<n;)if(!1===t(this.items[e],e,this.items))return}};var s={load:{type:["load"]},unload:{type:["beforeunload"]},resize:{type:["resize","scroll","orientationchange"],args:["width","height"]},scroll:{type:["scroll"],args:["scrollX","scrollY"]}},u={width:function(t,e){return t.innerWidth||e.documentElement.clientWidth||e.body.clientWidth},height:function(t,e){return t.innerHeight||e.documentElement.clientHeight||e.body.clientHeight},scrollX:function(t,e){return t.scrollX||t.pageXOffset},scrollY:function(t,e){return t.scrollY||t.pageYOffset}};function c(){var n={},r=o({addEventListener:t,removeEventListener:e,view:arguments.length>0&&void 0!==arguments[0]?arguments[0]:window});Object.keys(s).forEach(function(t){n[t]=r(s[t],u)});var i=function(t){if(!n[t])throw new Error("'"+t+"' is not a valid event name");return n[t]},c={on:function(t,e){var n=i(t);return"function"==typeof e&&n.subscribers.add(e),c},off:function(t,e){if(void 0===t)Object.keys(n).forEach(function(t){n[t].subscribers.empty()});else{var r=i(t);"function"==typeof e?r.subscribers.remove(e):void 0===e&&r.subscribers.empty()}return c},trigger:function(t){return i(t).publisher(!0),c}};return Object.keys(u).forEach(function(t){c[t]=u[t]}),c}module.exports=c;
