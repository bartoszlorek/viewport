"use strict";function t(t,n,e){null!=t&&(t.addEventListener?t.addEventListener(n,e,!1):t.attachEvent("on"+n,function(){return e.call(t,window.event)}))}function n(t,n,e){null!=t&&(t.removeEventListener?t.removeEventListener(n,e):t.detachEvent("on"+n,e))}function e(t,n){if(null!=t)if("function"==typeof Event)t.dispatchEvent(new Event(n));else if(t.document){var e=t.document.createEvent("UIEvents");e.initUIEvent(n,!0,!1,t,0),t.dispatchEvent(e)}}function r(t,n){return null!=t?function(e){var r=t.map(function(t){return n[t]()});return r.unshift(e),r}:function(t){return[t]}}function i(t,n,e){var r=null==t?0:t.length;if(r!==(null==n?0:n.length))return!1;for(var i=void 0!==e?e-1:-1;++i<r;)if(t[i]!==n[i])return!1;return!0}var o=function(t){if(Array.isArray(t)){for(var n=0,e=Array(t.length);n<t.length;n++)e[n]=t[n];return e}return Array.from(t)};function u(t,n,e){this.items=null!=t?[].concat(o(t)):[],this.loaded=n||null,this.unloaded=e||null}function s(t){return function(n,e){var o=[],s=r(n.args,e),c={type:n.type,subscribers:new u(null,function(){return e=(n=c).type,r=n.publisher,void e.forEach(function(n){t.addEventListener(t.view,n,r)});var n,e,r},function(){return e=(n=c).type,r=n.publisher,void e.forEach(function(n){t.removeEventListener(t.view,n,r)});var n,e,r}),publisher:function(t){var n=s(t),e=void 0;if(n.length>1){var r=!i(o,n,1);if(o=n,!r)return!1}return c.subscribers.forEach(function(t){e=t.apply(null,n)}),void 0!==e&&(t.returnValue=e),e},clearCache:function(){return o=[],c}};return c}}function c(t,n){var e={};return Object.keys(n).forEach(function(r){e[r]=function(){return n[r](t,t.document)}}),e}u.prototype={get length(){return this.items.length},add:function(t){-1===this.items.indexOf(t)&&(this.items.push(t),this.loaded&&1===this.items.length&&this.loaded(this))},remove:function(t){var n=this.items.indexOf(t);n>-1&&(this.items.splice(n,1),this.unloaded&&!this.items.length&&this.unloaded(this))},empty:function(){this.items=[],this.unloaded&&this.unloaded(this)},forEach:function(t){for(var n=-1,e=this.items.length;++n<e;)if(!1===t(this.items[n],n,this.items))return}};var l={load:{type:["load"]},unload:{type:["beforeunload"]},resize:{type:["resize","scroll","orientationchange"],args:["width","height"]},scroll:{type:["scroll"],args:["scrollX","scrollY"]}},f={width:function(t,n){return t.innerWidth||n.documentElement.clientWidth||n.body.clientWidth},height:function(t,n){return t.innerHeight||n.documentElement.clientHeight||n.body.clientHeight},scrollX:function(t,n){return t.scrollX||t.pageXOffset},scrollY:function(t,n){return t.scrollY||t.pageYOffset}};function a(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,i=c(r,f),o={},u=s({addEventListener:t,removeEventListener:n,view:r});Object.keys(l).forEach(function(t){o[t]=u(l[t],i)});var a=function(t){if(!o[t])throw new Error("'"+t+"' is not a valid event name");return o[t]},h={on:function(t,n){var e=a(t);return"function"==typeof n&&e.subscribers.add(n),h},off:function(t,n){if(void 0===t)Object.keys(o).forEach(function(t){o[t].subscribers.empty()});else{var e=a(t);"function"==typeof n?e.subscribers.remove(n):void 0===n&&e.subscribers.empty()}return h},trigger:function(t){var n=a(t).clearCache();return e(r,n.type[0]),h}};return Object.keys(i).forEach(function(t){h[t]=i[t]}),h}module.exports=a;
