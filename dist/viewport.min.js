"use strict";function e(e,n,t){null!=e&&(e.addEventListener?e.addEventListener(n,t,!1):e.attachEvent("on"+n,function(){return t.call(e,window.event)}))}function n(e,n,t){null!=e&&(e.removeEventListener?e.removeEventListener(n,t):e.detachEvent("on"+n,t))}function t(e,n,t){return null!=n?function(){return n.map(function(n){return t[n](e,e.document)})}:function(){return null}}var i=function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")},r=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),o=function(){function e(n,t){i(this,e),this.items=[],this.loaded=n||null,this.unloaded=t||null}return r(e,[{key:"add",value:function(e){-1===this.items.indexOf(e)&&(this.items.push(e),this.loaded&&1===this.items.length&&this.loaded(this))}},{key:"remove",value:function(e){var n=this.items.indexOf(e);n>-1&&(this.items.splice(n,1),this.unloaded&&!this.items.length&&this.unloaded(this))}},{key:"empty",value:function(){this.items=[],this.unloaded&&this.unloaded(this)}},{key:"forEach",value:function(e){for(var n=-1,t=this.items.length;++n<t;)if(!1===e(this.items[n],n,this.items))return}},{key:"length",get:function(){return this.items.length}}]),e}();function u(e){return function(n,i){var r=[],u=t(e.view,n.args,i),s={};return s.type=n.type,s.subscribers=new o(function(){return t=(n=s).type,i=n.publisher,r=e.view,o=e.addEventListener,void t.forEach(function(e){o(r,e,i)});var n,t,i,r,o},function(){return t=(n=s).type,i=n.publisher,r=e.view,o=e.addEventListener,void t.forEach(function(e){o(r,e,i)});var n,t,i,r,o}),s.publisher=function(e){s.subscribers.length;var n=u();if(!0!==e&&null!==n){var t=n.some(function(e,n){return r[n]!==e});if(r=n,!t)return!1}s.subscribers.forEach(function(e){e.apply(null,n)})},s}}var s={load:{type:["load"]},unload:{type:["beforeunload"]},resize:{type:["resize","scroll","orientationchange"],args:["width","height"]},scroll:{type:["scroll"],args:["scrollX","scrollY"]}},l={width:function(e,n){return e.innerWidth||n.documentElement.clientWidth||n.body.clientWidth},height:function(e,n){return e.innerHeight||n.documentElement.clientHeight||n.body.clientHeight},scrollX:function(e,n){return e.scrollX||e.pageXOffset},scrollY:function(e,n){return e.scrollY||e.pageYOffset}};function c(){var t={},i=u({addEventListener:e,removeEventListener:n,view:arguments.length>0&&void 0!==arguments[0]?arguments[0]:window});Object.keys(s).forEach(function(e){t[e]=i(s[e],l)});var r=function(e){if(!t[e])throw new Error("The '"+e+"' is not a valid event name.");return t[e]},o={on:function(e,n){var t=r(e);return"function"==typeof n&&t.subscribers.add(n),o},off:function(e,n){if(void 0===e)Object.keys(t).forEach(function(e){t[e].subscribers.removeAll()});else{var i=r(e);"function"==typeof n?i.subscribers.remove(n):void 0===n&&i.subscribers.removeAll()}return o},trigger:function(e){return r(e).publisher(!0),o}};return Object.keys(l).forEach(function(e){o[e]=l[e]}),o}module.exports=c;
