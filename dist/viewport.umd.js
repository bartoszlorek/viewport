!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):n.createViewport=e()}(this,function(){"use strict";function n(n,e,t){null!=n&&(n.addEventListener?n.addEventListener(e,t,!1):n.attachEvent("on"+e,function(){return t.call(n,window.event)}))}function e(n,e,t){null!=n&&(n.removeEventListener?n.removeEventListener(e,t):n.detachEvent("on"+e,t))}function t(n,e){return null!=n?function(){return n.map(function(n){return e[n]()})}:function(){return null}}function r(n,e){var r={};return Object.keys(n).forEach(function(i){var o=[],u=n[i],c=u.type,s=t(u.args,e),l={type:c,subscribers:[],publisher:function(n){var e=l.subscribers.length,t=s();if(!0!==n&&null!==t){var r=t.some(function(n,e){return o[e]!==n});if(o=t,!r)return!1}for(var i=-1;++i<e;)l.subscribers[i].apply(null,t)}};r[i]=l}),r}function i(n,e){var t=function(n){var t=n.type,r=n.publisher;t.forEach(function(n){return e(n,r)})};return{add:function(e,t){var r,i,o;-1===e.subscribers.indexOf(t)&&(e.subscribers.push(t),1===e.subscribers.length&&(i=(r=e).type,o=r.publisher,i.forEach(function(e){return n(e,o)})))},remove:function(n,e){var r=n.subscribers.indexOf(e);r>-1&&(n.subscribers.splice(r,1),n.subscribers.length||t(n))},removeAll:function(n){n.subscribers=[],t(n)}}}var o={load:{type:["load"]},unload:{type:["beforeunload"]},resize:{type:["resize","scroll","orientationchange"],args:["width","height"]},scroll:{type:["scroll"],args:["scrollX","scrollY"]}},u={width:function(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth},height:function(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight},scrollX:function(){return window.scrollX||window.pageXOffset},scrollY:function(){return window.scrollY||window.pageYOffset}};return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,c=r(o,u),s=function(n){if(!c[n])throw new Error("The '"+n+"' is not a valid event name.");return c[n]},l=i(n.bind(null,t),e.bind(null,t)),f={on:function(n,e){var t=s(n);return"function"==typeof e&&l.add(t,e),f},off:function(n,e){if(void 0===n)Object.keys(c).forEach(function(n){l.removeAll(c[n])});else{var t=s(n);"function"==typeof e?l.remove(t,e):void 0===e&&l.removeAll(t)}return f},trigger:function(n){return s(n).publisher(!0),f}};return Object.keys(u).forEach(function(n){f[n]=u[n]}),f}});
