!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):e.createViewport=n()}(this,function(){"use strict";function e(e,n,t){null!=e&&(e.addEventListener?e.addEventListener(n,t,!1):e.attachEvent("on"+n,function(){return t.call(e,window.event)}))}function n(e,n,t){null!=e&&(e.removeEventListener?e.removeEventListener(n,t):e.detachEvent("on"+n,t))}function t(e,n,t){return null!=n?function(){return n.map(function(n){return t[n](e,e.document)})}:function(){return null}}var i=function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")},r=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),o=function(){function e(n,t){i(this,e),this.items=[],this.loaded=n||null,this.unloaded=t||null}return r(e,[{key:"add",value:function(e){-1===this.items.indexOf(e)&&(this.items.push(e),this.loaded&&1===this.items.length&&this.loaded(this))}},{key:"remove",value:function(e){var n=this.items.indexOf(e);n>-1&&(this.items.splice(n,1),this.unloaded&&!this.items.length&&this.unloaded(this))}},{key:"empty",value:function(){this.items=[],this.unloaded&&this.unloaded(this)}},{key:"forEach",value:function(e){for(var n=-1,t=this.items.length;++n<t;)if(!1===e(this.items[n],n,this.items))return}},{key:"length",get:function(){return this.items.length}}]),e}();var u={load:{type:["load"]},unload:{type:["beforeunload"]},resize:{type:["resize","scroll","orientationchange"],args:["width","height"]},scroll:{type:["scroll"],args:["scrollX","scrollY"]}},s={width:function(e,n){return e.innerWidth||n.documentElement.clientWidth||n.body.clientWidth},height:function(e,n){return e.innerHeight||n.documentElement.clientHeight||n.body.clientHeight},scrollX:function(e,n){return e.scrollX||e.pageXOffset},scrollY:function(e,n){return e.scrollY||e.pageYOffset}};return function(){var i,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,c={},l=(i={addEventListener:e,removeEventListener:n,view:r},function(e,n){var r=[],u=t(i.view,e.args,n),s={};return s.type=e.type,s.subscribers=new o(function(){return n=(e=s).type,t=e.publisher,r=i.view,o=i.addEventListener,void n.forEach(function(e){o(r,e,t)});var e,n,t,r,o},function(){return n=(e=s).type,t=e.publisher,r=i.view,o=i.addEventListener,void n.forEach(function(e){o(r,e,t)});var e,n,t,r,o}),s.publisher=function(e){s.subscribers.length;var n=u();if(!0!==e&&null!==n){var t=n.some(function(e,n){return r[n]!==e});if(r=n,!t)return!1}s.subscribers.forEach(function(e){e.apply(null,n)})},s});Object.keys(u).forEach(function(e){c[e]=l(u[e],s)});var f=function(e){if(!c[e])throw new Error("The '"+e+"' is not a valid event name.");return c[e]},a={on:function(e,n){var t=f(e);return"function"==typeof n&&t.subscribers.add(n),a},off:function(e,n){if(void 0===e)Object.keys(c).forEach(function(e){c[e].subscribers.removeAll()});else{var t=f(e);"function"==typeof n?t.subscribers.remove(n):void 0===n&&t.subscribers.removeAll()}return a},trigger:function(e){return f(e).publisher(!0),a}};return Object.keys(s).forEach(function(e){a[e]=s[e]}),a}});
