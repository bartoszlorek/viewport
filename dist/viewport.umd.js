!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):e.createViewport=n()}(this,function(){"use strict";function e(e,n,r){null!=e&&(e.addEventListener?e.addEventListener(n,r,!1):e.attachEvent("on"+n,function(){return r.call(e,window.event)}))}function n(e,n,r){null!=e&&(e.removeEventListener?e.removeEventListener(n,r):e.detachEvent("on"+n,r))}function r(e,n,r){return null!=n?function(){return n.map(function(n){return r[n](e,e.document)})}:function(){return null}}function t(e,n,t){var i={};return Object.keys(n).forEach(function(o){var u=[],c=n[o],s=c.type,l=c.args,f=r(e,l,t),a={type:s,subscribers:[],publisher:function(e){var n=a.subscribers.length,r=f();if(!0!==e&&null!==r){var t=r.some(function(e,n){return u[n]!==e});if(u=r,!t)return!1}for(var i=-1;++i<n;)a.subscribers[i].apply(null,r)}};i[o]=a}),i}function i(e,n){var r=function(e){var r=e.type,t=e.publisher;r.forEach(function(e){return n(e,t)})};return{add:function(n,r){var t,i,o;-1===n.subscribers.indexOf(r)&&(n.subscribers.push(r),1===n.subscribers.length&&(i=(t=n).type,o=t.publisher,i.forEach(function(n){return e(n,o)})))},remove:function(e,n){var t=e.subscribers.indexOf(n);t>-1&&(e.subscribers.splice(t,1),e.subscribers.length||r(e))},removeAll:function(e){e.subscribers=[],r(e)}}}var o={load:{type:["load"]},unload:{type:["beforeunload"]},resize:{type:["resize","scroll","orientationchange"],args:["width","height"]},scroll:{type:["scroll"],args:["scrollX","scrollY"]}},u={width:function(e,n){return e.innerWidth||n.documentElement.clientWidth||n.body.clientWidth},height:function(e,n){return e.innerHeight||n.documentElement.clientHeight||n.body.clientHeight},scrollX:function(e,n){return e.scrollX||e.pageXOffset},scrollY:function(e,n){return e.scrollY||e.pageYOffset}};return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,c=t(r,o,u),s=function(e){if(!c[e])throw new Error("The '"+e+"' is not a valid event name.");return c[e]},l=i(e.bind(null,r),n.bind(null,r)),f={on:function(e,n){var r=s(e);return"function"==typeof n&&l.add(r,n),f},off:function(e,n){if(void 0===e)Object.keys(c).forEach(function(e){l.removeAll(c[e])});else{var r=s(e);"function"==typeof n?l.remove(r,n):void 0===n&&l.removeAll(r)}return f},trigger:function(e){return s(e).publisher(!0),f}};return Object.keys(u).forEach(function(e){f[e]=u[e]}),f}});
